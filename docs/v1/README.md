# Awesome Task Exchange System (aTES) для UberPopug Inc (v1)

![Event stroming схема](event_storming_diagram.png)

### Бизнес-события

- **СотрудникДобавлен** - возникает после добавлени нового сотрудника в систему
  Содержит:
  - идентификатор сотрудника
- **РольСотрудникаИзменена** - возникает после изменении роли сотрудника
  Содержит:
  - идентификатор сотрудника
  - новую роль
- **ЗадачаДобавлена** - возникает при добавлении задачи в систему
  Содержит:
  - идентификатор задачи
  - идентификатор сотрудника
- **ЗадачаНазначена** - возникает при переназначении менедженром/администратором задачи на другого сотрудника. 
  Содержит:
  - идентификатор задачи
  - идентификатор сотрудника
- **ЗадачаЗакрыта** - возникает при закрытии сотрудником задачи. 
  Содержит:
  - идентификатор задачи
- **БалансОбновился** - возникает при изменении баланса сотрудника.
  Содержит:
  - идентификатор сотрудника
  - новое значени баланса
- **РассчетныйПериодЗакончился** - возникает в конце рабочего дня, запускает расчет и выплаты по сотрудникам
- **ОплатаПроизведена** - возникает после оплаты сотруднику. 
  Содержит:
  - указатель на сотрудника
  - сумму выплаты

## Модель данных

![Alt text](model_data.png)

### Общие данные

Домен "Назначение задач менеджментом" и "Работа над задачами" хранят сотрудников и задачи в общей БД

**Сотрудник**

Владелец данных: домен авторизации
Состоит из: идентификатора, роль, адрес почты
Передается в другие домены через CUD событие: СотрудникСоздан

**Задача**

Владелец данных: домен работы над задачами
Состоит из: описания, цены назначения, цены закрытия
Передается в другие домены через CUD событие: ЗадачаСоздана


## Разделение на сервисы
 
- **Сервис авторизации**: единый сервис авторизации используемый всеми остальными сервисами для получения информации о пользователе
- **Таск-трекер**: сервис создания и управления задачами
- **Аккаутинг**: сервис бухгалтерсого учета и выплат
- **Аналитика**: отображение аналитических данных